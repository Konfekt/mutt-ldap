Mutt-LDAP provides an `external address query script`_ for Mutt_ which
connects to LDAP_ databases using python-ldap_.  It can cache queries
locally in case your LDAP server is slow or not always available,
expiring cached queries after a configurable amount of time.

Usage
=====

  usage: mutt_ldap [-h] [--version] [--config CONFIG] [--verbose]
                  query [query ...]

positional arguments:
  query            Search query for the LDAP directory

optional arguments:
  --config CONFIG  Path to the configuration file

If the ``xdg`` module supplied by PyXDG_ is not available, the default
configuration path falls back on ``~/.config/mutt-ldap.cfg`` and the default
cache path falls back on ``~/.cache/mutt-ldap.json``.

To use in mutt, add the following line to your ``~/.muttrc``::

  set query_command = "mutt_ldap.py '%s'"

Search for addresses (from Mutt_) with ``^t``, optionally after typing
part of the name.  Configure your connection by creating
``$XDG_CONFIG_HOME/mutt-ldap.cfg`` containing something like::

  [connection]
  server = myserver.example.net
  port   = 1389
  basedn = ou=people,dc=example,dc=net
  [auth]
  user         = username
  password-cmd = pass example

The query cache (enabled by default) will be created at
``$XDG_DATA_HOME/mutt-ldap.json``, unless overriden by an explicit
``cache.path`` setting.

See the ``CONFIG`` options in ``mutt_ldap.py`` for other available
settings.  See the `XDG Base Directory Specification`_ for more
details on configuration and cache file locations.  

Installation
============

Packages
--------

Gentoo
~~~~~~

I've packaged Mutt-LDAP for Gentoo_.  You need layman_ and my `wtk
overlay`_.  Install with::

  # emerge -av app-portage/layman
  # layman --add wtk
  # emerge -av mail-client/mutt-ldap

Dependencies
------------

If you're installing by hand or packaging Mutt-LDAP for another
distribution, you'll need the following dependencies:

============  ====================  ===========  ======================
Package       Purpose               Debian_      Gentoo_
============  ====================  ===========  ======================
python-ldap_  LDAP connections      python-ldap  dev-python/python-ldap
PyXDG_        Optional XDG support  python-xdg   dev-python/pyxdg
============  ====================  ===========  ======================

Installing by hand
------------------

Mutt-LDAP is available as a Git_ repository::

  $ git clone git://tremily.us/mutt-ldap.git

It is also mirrored on GitHub_.  To install the checkout, run the
standard::

  $ python setup.py install

or you can just copy ``mutt_ldap.py`` into to your ``PATH``.

Licence
=======

This project is distributed under the `GNU General Public License
Version 3`_ or greater.

Bugs
====

Use the `GitHub issue tracker`_ to submit bugs.

Related work
============

`mutt_ldap_query`_ is a Perl script with a similar purpose.

.. _external address query script:
   [www][0]
.. _Mutt: [www][1]
.. _LDAP: [en][2]
.. _python-ldap: [www][3]
.. _Gentoo: [www][4]
.. _layman: [layman][5]
.. _wtk overlay: [blog][6]
.. _Debian: [www][7]
.. _PyXDG: [freedesktop][8]
.. _Git: [git-scm][9]
.. _XDG Base Directory Specification:
   [standards][10]
.. _GNU General Public License Version 3: [www][11]
.. _GitHub: [github][12]
.. _GitHub issue tracker: [github][13]
.. _mutt_ldap_query: ftp://ftp.mutt.org/pub/mutt/contrib/mutt_ldap_query.README

## Links

[0]: [www](http://www.mutt.org/doc/manual/manual-4.html#ss4.5)
[1]: [www](http://www.mutt.org/)
[2]: [en](http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)
[3]: [www](http://www.python-ldap.org/)
[4]: [www](http://www.gentoo.org/)
[5]: [layman](http://layman.sourceforge.net/)
[6]: [blog](http://blog.tremily.us/posts/Gentoo_overlay/)
[7]: [www](http://www.debian.org/)
[8]: [freedesktop](http://freedesktop.org/wiki/Software/pyxdg)
[9]: [git-scm](http://git-scm.com/)
[10]: [standards](http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)
[11]: [www](http://www.gnu.org/licenses/gpl.html)
[12]: [github](https://github.com/wking/mutt-ldap)
[13]: [github](https://github.com/wking/mutt-ldap/issues)
